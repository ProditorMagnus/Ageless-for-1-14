#textdomain wesnoth-Ageless_Era

[unit_type]
    id=AE_agl_deep_Black_Tyrhai
    name= _ "Black Tyr'Hai"
    race=monster
    image="units/elves-deep/blacktyrhai.png"
    image_icon="units/elves-deep/blacktyrhai.png"~CROP(31,30,72,72)
    profile="portraits/elves-deep/tyrhai.png"
    hitpoints=52
    movement_type=AE_dep_deep
    movement=7
    experience=100
    level=2
    alignment=chaotic
    advances_to=AE_agl_deep_Shadow_Tyrhai
    cost=32
    usage=fighter
    description= {AE_DEP_UNIT_NOTICE} +""+{SPECIAL_NOTES}+{AE_DEP_SPECIAL_NOTES_TRAMPLE}
    {DEFENSE_ANIM "units/elves-deep/blacktyrhai.png" "units/elves-deep/blacktyrhai.png" {SOUND_LIST:DRAKE_HIT} }
    die_sound={SOUND_LIST:DRAKE_HIT}

    [attack]
        name=fangs
        description={STR_FANGS}
        icon=attacks/fangs.png
        type=blade
        range=melee
        damage=7
        number=4
        [specials]
            {WEAPON_SPECIAL_DRAIN}
        [/specials]
    [/attack]

    [attack]
        name=trample
        description={STR_TRAMPLE}
        icon=attacks/mud-glob.png
        type=impact
        range=melee
        damage=12
        number=2
        defense_weight=0
        [specials]
            [attacks]
                id=AE_dep_trample
                name= _ "trample"
                description= _ "This unit ignores the retaliation of the enemy and just overruns it."
                value=0
                apply_to=opponent
            [/attacks]
        [/specials]
    [/attack]

    [attack_anim]
        [filter_attack]
            name=trample
        [/filter_attack]
        start_time=-500

        [frame]
            image="units/elves-deep/blacktyrhai.png:300"
            offset=0.0~-0.3
        [/frame]
        [frame]
            image="units/elves-deep/blacktyrhai.png:1500"
            offset=-0.3~2.0:1500
            halo=halo/trample-[1,2,3,4,5,1,2,3,4,5].png~SCALE(120,120)~O(60%):150
        [/frame]

        {SOUND:HIT_AND_MISS {SOUND_LIST:DRAKE_HIT} {SOUND_LIST:MISS} -100}
    [/attack_anim]

    [attack_anim]
        [filter_attack]
            name=fangs
        [/filter_attack]
        start_time=-500

        [frame]
            image="units/elves-deep/blacktyrhai.png:50"
            offset=0.0~-0.1
        [/frame]
        [frame]
            image="units/elves-deep/blacktyrhai.png:500"
            offset=0.1~0.3.0:200,0.4~0.6:150,0.6~0.4:100,0.4~0.0:100
        [/frame]

        [if]
            hits=yes
            [missile_frame]
                halo=halo/bigrip-[1~5].png:[60*5]
                offset=1.0
                halo_x=-10~0
                auto_vflip=false
            [/missile_frame]

            [missile_frame]
                halo=halo/bigrip-[1~5].png~FL(horiz):[60*5]
                offset=1.0
                halo_x=10~0
                auto_vflip=false
            [/missile_frame]
        [/if]

        {SOUND:HIT_AND_MISS {SOUND_LIST:DRAKE_HIT} {SOUND_LIST:MISS} -100}
    [/attack_anim]

    [event]
        name=attack end
        first_time_only=no

        [filter_attack]
            special_active=AE_dep_trample
        [/filter_attack]

        [store_locations]
            [not]
                [filter]
                [/filter]
            [/not]

            [filter_adjacent_location]
                x,y=$x2,$y2
                adjacent=-$unit.facing
            [/filter_adjacent_location]

            variable=trample_target_hex
        [/store_locations]

        [if]
            [variable]
                name=trample_target_hex.length
                greater_than=0
            [/variable]

            [then]
                [teleport]
                    [filter]
                        x,y=$x1,$y1
                    [/filter]
                    animate=no

                    x,y=$trample_target_hex.x,$trample_target_hex.y
                    check_passability=yes
                    clear_shroud=yes
                [/teleport]
                [redraw]
                [/redraw]
            [/then]
        [/if]

        {CLEAR_VARIABLE trample_direction,trample_target_hex}
    [/event]

    [death]
        start_time=-1200
        [frame]
            alpha=1~0:1600
            image="units/elves-deep/blacktyrhai.png:1600"
            halo="projectiles/fireball-impact-[16~1].png~BLEND(20,20,20,0.9)~SCALE(200,200):[100*16]"
            sound=embrace-of-shassagoth.ogg
        [/frame]
        [frame]
            image="misc/blank-hex.png:400"
        [/frame]
    [/death]

    [animation]
        apply_to=recruited
        start_time=-1200
        [frame]
            alpha=0~1:1600
            image="units/elves-deep/blacktyrhai.png:1600"
            halo="projectiles/fireball-impact-[1~16].png~BLEND(20,20,20,0.9)~SCALE(200,200):[100*16]"
            sound=embrace-of-shassagoth.ogg
        [/frame]
    [/animation]
[/unit_type]

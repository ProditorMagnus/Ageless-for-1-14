#textdomain wesnoth-Era_of_Magic
[unit_type]
    id=AE_mag_Storm_Sphere
    name= _ "Storm Sphere"
    race=mechanical
    image="units/tharis-orbs/orb3-icon.png"
    hitpoints=41
    movement_type=smallfly
    movement=8
    experience=55
    level=2
    alignment=chaotic
    advances_to=null
    [advancement]
        strict_amla=yes
        max_times=1
        id=stormsphere_nightstalk
        description= _ "Nocturnal Regeneration 10, +3 HP +20% max XP"
        image="attacks/curse-goblin.png"
        [effect]
            apply_to=remove_ability
            [abilities]
                {ABILITY_AE_MAG_NOCTURNAL_REGENERATION 7}
            [/abilities]
        [/effect]
        [effect]
            apply_to=new_ability
            [abilities]
                {ABILITY_AE_MAG_NOCTURNAL_REGENERATION 10}
            [/abilities]
        [/effect]
        [effect]
            apply_to=hitpoints
            increase_total=3
            heal_full=yes
        [/effect]
        [effect]
            apply_to=max_experience
            increase=20%
        [/effect]
        [effect]
            apply_to=status
            remove=poisoned
        [/effect]
        [effect]
            apply_to=status
            remove=slowed
        [/effect]
    [/advancement]
    [advancement]
        strict_amla=yes
        max_times=1
        id=stormsphere_skirmisher
        description= _ "Skirmisher, +2 HP, +20% max XP"
        image="attacks/witch-fire.png"
        [effect]
            apply_to=new_ability
            [abilities]
                {ABILITY_SKIRMISHER}
            [/abilities]
        [/effect]
        [effect]
            apply_to=hitpoints
            increase_total=2
            heal_full=yes
        [/effect]
        [effect]
            apply_to=max_experience
            increase=20%
        [/effect]
        [effect]
            apply_to=status
            remove=poisoned
        [/effect]
        [effect]
            apply_to=status
            remove=slowed
        [/effect]
    [/advancement]
    [advancement]
        strict_amla=yes
        max_times=1
        id=stormsphere_hitandrun
        description= _ "Hit and run 2, +2 HP, +25% max XP"
        image="icons/boots_elven.png"
        [effect]
            apply_to=new_ability
            [abilities]
                {ABILITY_AE_MAG_HITANDRUN 2}
            [/abilities]
        [/effect]
        [effect]
            apply_to=hitpoints
            increase_total=2
            heal_full=yes
        [/effect]
        [effect]
            apply_to=max_experience
            increase=25%
        [/effect]
        [effect]
            apply_to=status
            remove=poisoned
        [/effect]
        [effect]
            apply_to=status
            remove=slowed
        [/effect]
#ifdef MULTIPLAYER
        [filter]
            lua_function=wesnoth.wml_conditionals.AE_not_rpg
        [/filter]
#endif
    [/advancement]
    [advancement]
        strict_amla=yes
        max_times=1
        id=stormsphere_dmg
        #buffing both dark lightning and life drain equally
        description= _ "+2 ranged damage, +3 HP, +20% max XP"
        image="attacks/orb-lightning.png"
        [effect]
            apply_to=attack
            range=ranged
            increase_damage=2
        [/effect]
        [effect]
            apply_to=hitpoints
            increase_total=3
            heal_full=yes
        [/effect]
        [effect]
            apply_to=max_experience
            increase=20%
        [/effect]
        [effect]
            apply_to=status
            remove=poisoned
        [/effect]
        [effect]
            apply_to=status
            remove=slowed
        [/effect]
    [/advancement]
    [advancement]
        strict_amla=yes
        max_times=1
        id=shadowsphere_mp
        description= _ "+1 MP, +3 HP, +20% max XP"
        image="icons/boots_elven.png"
        [effect]
            apply_to=movement
            increase=1
        [/effect]
        [effect]
            apply_to=hitpoints
            increase_total=3
            heal_full=yes
        [/effect]
        [effect]
            apply_to=max_experience
            increase=20%
        [/effect]
        [effect]
            apply_to=status
            remove=poisoned
        [/effect]
        [effect]
            apply_to=status
            remove=slowed
        [/effect]
    [/advancement]
    {AMLA_DEFAULT}
    cost=37#35
    usage=scout
    description={AE_EOMA_UNIT_NOTICE}+{NO_DESCR_AVAILABLE}
    die_sound=silence.ogg
    [defend]
        start_time=-126
        halo_start_time=-126
        [halo_frame]
            image="units/tharis-orbs/magic-big-[1~4].png:62"
            auto_vflip=false
        [/halo_frame]
        [shield_frame]
            image="units/tharis-orbs/shield.png:100"
            auto_vflip=false
            layer=1
        [/shield_frame]
        [frame]
            image="units/tharis-orbs/orb2-[1~6].png:41"
        [/frame]
    [/defend]
    [defend]
        terrain_type=Q*^*,Mv^*
        start_time=-126
        halo_start_time=-126
        [halo_frame]
            image="units/tharis-orbs/magic-big-[1~4].png:62"
            auto_vflip=false
        [/halo_frame]
        [shield_frame]
            image="units/tharis-orbs/shield.png:100"
            auto_vflip=false
            layer=1
        [/shield_frame]
        [frame]
            image="units/tharis-orbs/orb2-ns[1~6].png:41"
        [/frame]
    [/defend]
    [resistance]
        arcane=120
        blade=80
        cold=60
        fire=90
        pierce=80
        impact=90
    [/resistance]
    [death]
        start_time=0
        [missile_frame]
            halo="projectiles/fireball-impact-[1~16].png~GS()~CS(150,0,180)~SCALE(100,150):60"
            offset=0.0
            sound=magic-dark-big.ogg
            auto_vflip=no
        [/missile_frame]
    [/death]
    [idle_anim]
        [halo_frame]
            image="units/tharis-orbs/magic-big-[1~4].png:100"
            auto_vflip=false
        [/halo_frame]
        bolt2_start_time=100
        [shield_frame]
            image="units/tharis-orbs/shield.png:400"
            auto_vflip=false
            layer=1
        [/shield_frame]
        [bolt_frame]
            image="units/tharis-orbs/energy-a-[1~4,1,2].png:75"
            auto_vflip=false
            alpha=1:300,0
        [/bolt_frame]
        [bolt_frame]
            image="misc/blank-hex.png:1"
        [/bolt_frame]
        [bolt2_frame]
            image="misc/blank-hex.png:1"
        [/bolt2_frame]
        [bolt2_frame]
            image="units/tharis-orbs/energy-b-[1~4].png:100"
            auto_vflip=false
            alpha=1:300,0
        [/bolt2_frame]
        [frame]
            duration=400
            image="units/tharis-orbs/orb2-[1~6].png"
        [/frame]
    [/idle_anim]
    [idle_anim]
        terrain_type=Q*^*,Mv^*
        [halo_frame]
            image="units/tharis-orbs/magic-big-[1~4].png:100"
            auto_vflip=false
        [/halo_frame]
        bolt2_start_time=100
        [shield_frame]
            image="units/tharis-orbs/shield.png:400"
            auto_vflip=false
            layer=1
        [/shield_frame]
        [bolt_frame]
            image="units/tharis-orbs/energy-a-[1~4,1,2].png:75"
            auto_vflip=false
            alpha=1:300,0
        [/bolt_frame]
        [bolt_frame]
            image="misc/blank-hex.png:1"
        [/bolt_frame]
        [bolt2_frame]
            image="misc/blank-hex.png:1"
        [/bolt2_frame]
        [bolt2_frame]
            image="units/tharis-orbs/energy-b-[1~4].png:100"
            auto_vflip=false
            alpha=1:300,0
        [/bolt2_frame]
        [frame]
            duration=400
            image="units/tharis-orbs/orb2-ns[1~6].png"
        [/frame]
    [/idle_anim]
    [recruit_anim]
        start_time=0
        [frame]
            image="units/tharis-orbs/orb2-1.png:100"
            blend_color=0,0,0
            blend_ratio=0.5
            y=27
        [/frame]
        [frame]
            duration=200
            image="units/tharis-orbs/orb2-[1~6].png"
            blend_color=0,0,0
            blend_ratio=0.5~0
            y=27~0
            sound=magic-dark-big.ogg
        [/frame]
    [/recruit_anim]
    [standing_anim]
        start_time=0
        bolt2_start_time=100
        [shield_frame]
            image="units/tharis-orbs/shield.png:400"
            auto_vflip=false
            layer=1
        [/shield_frame]
        [bolt_frame]
            image="units/tharis-orbs/energy-a-[1~4,1,2].png:75"
            auto_vflip=false
            alpha=1:300,0
        [/bolt_frame]
        [bolt_frame]
            image="misc/blank-hex.png:1"
        [/bolt_frame]
        [bolt2_frame]
            image="misc/blank-hex.png:1"
        [/bolt2_frame]
        [bolt2_frame]
            image="units/tharis-orbs/energy-b-[1~4,1,2].png:75"
            auto_vflip=false
            alpha=1:300,0
        [/bolt2_frame]
        [frame]
            duration=400
            image="units/tharis-orbs/orb2-[1~6].png"
        [/frame]
    [/standing_anim]
    [standing_anim]
        terrain_type=Q*^*,Mv^*
        start_time=0
        bolt2_start_time=100
        [shield_frame]
            image="units/tharis-orbs/shield.png:400"
            auto_vflip=false
            layer=1
        [/shield_frame]
        [bolt_frame]
            image="units/tharis-orbs/energy-a-[1~4,1,2].png:75"
            auto_vflip=false
            alpha=1:300,0
        [/bolt_frame]
        [bolt_frame]
            image="misc/blank-hex.png:1"
        [/bolt_frame]
        [bolt2_frame]
            image="misc/blank-hex.png:1"
        [/bolt2_frame]
        [bolt2_frame]
            image="units/tharis-orbs/energy-b-[1~4,1,2].png:75"
            auto_vflip=false
            alpha=1:300,0
        [/bolt2_frame]
        [frame]
            duration=400
            image="units/tharis-orbs/orb2-ns[1~6].png"
        [/frame]
    [/standing_anim]
    [movement_anim]
        start_time=0
        [shield_frame]
            image="units/tharis-orbs/shield.png:200"
            auto_vflip=false
            layer=1
            offset=0.0~1.0.0
        [/shield_frame]
        [halo_frame]
            image="units/tharis-orbs/lightning-rim[1~5].png:40"
            auto_vflip=false
            offset=0.0~1.0.0
        [/halo_frame]
        [frame]
            duration=200
            image="units/tharis-orbs/orb2-[1~6].png"
        [/frame]
    [/movement_anim]
    [movement_anim]
        terrain_type=Q*^*,Mv^*
        start_time=0
        [shield_frame]
            image="units/tharis-orbs/shield.png:200"
            auto_vflip=false
            layer=1
            offset=0.0~1.0.0
        [/shield_frame]
        [halo_frame]
            image="units/tharis-orbs/lightning-rim[1~5].png:40"
            auto_vflip=false
            offset=0.0~1.0.0
        [/halo_frame]
        [frame]
            duration=200
            image="units/tharis-orbs/orb2-ns[1~6].png"
        [/frame]
    [/movement_anim]
    [abilities]
        {ABILITY_AE_MAG_NOCTURNAL_REGENERATION 7}
    [/abilities]
    [attack]
        name=touch
        description={STR_TOUCH}
        icon=attacks/witch-fire.png
        type=cold
        range=melee
        damage=4
        number=4
        [specials]
            {WEAPON_SPECIAL_MAGICAL}
        [/specials]
    [/attack]
    [attack]
        name=dark lightning
        description= _ "dark lightning"
        icon=attacks/orb-lightning.png
        type=cold
        range=ranged
        damage=8
        number=3
        [specials]
            {WEAPON_SPECIAL_MAGICAL}
        [/specials]
    [/attack]
    [attack]
        name=life drain
        description= _ "life drain"
        icon=attacks/immobilization.png
        type=cold
        range=ranged
        damage=9
        number=2
        [specials]
            {WEAPON_SPECIAL_MAGICAL}
            {WEAPON_SPECIAL_DRAIN}
        [/specials]
    [/attack]
    [attack_anim]
        [filter_attack]
            name=touch
        [/filter_attack]
        start_time=-250
        shield_start_time=-250
        halo_start_time=-250
        halo2_start_time=-250
        [shield_frame]
            image="units/tharis-orbs/shield.png:100"
            auto_vflip=false
            layer=1
            offset=0~0.6:225,0.6~0:225
        [/shield_frame]
        [halo_frame]
            image="units/tharis-orbs/lightning-rim[1~3,1].png:100"
            auto_vflip=false
            offset=0~0.6:225,0.6~0:225
        [/halo_frame]
        [halo2_frame]
            image="units/tharis-orbs/magic-big-[1~4].png:110"
            auto_vflip=false
            offset=0~0.6:225,0.6~0:225
        [/halo2_frame]
        [frame]
            duration=150
            image="units/tharis-orbs/orb2-[1~3].png"
        [/frame]
        [frame]
            duration=300
            image="units/tharis-orbs/orb2-[4~6].png"
            sound=lightning-miss.ogg
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=touch
        [/filter_attack]
        terrain_type=Q*^*,Mv^*
        start_time=-250
        shield_start_time=-250
        halo_start_time=-250
        halo2_start_time=-250
        [shield_frame]
            image="units/tharis-orbs/shield.png:100"
            auto_vflip=false
            layer=1
            offset=0~0.6:225,0.6~0:225
        [/shield_frame]
        [halo_frame]
            image="units/tharis-orbs/lightning-rim[1~3,1].png:100"
            auto_vflip=false
            offset=0~0.6:225,0.6~0:225
        [/halo_frame]
        [halo2_frame]
            image="units/tharis-orbs/magic-big-[1~4].png:110"
            auto_vflip=false
            offset=0~0.6:225,0.6~0:225
        [/halo2_frame]
        [frame]
            duration=150
            image="units/tharis-orbs/orb2-ns[1~3].png"
        [/frame]
        [frame]
            duration=300
            image="units/tharis-orbs/orb2-ns[4~6].png"
            sound=lightning-miss.ogg
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=dark lightning
        [/filter_attack]
        start_time=-400
        halo_start_time=-400
        halo2_start_time=-400
        bolt_start_time=-400
        bolt2_start_time=-100
        [shield_frame]
            image="units/tharis-orbs/shield.png:100"
            auto_vflip=false
            layer=1
        [/shield_frame]
        [halo_frame]
            image="units/tharis-orbs/lightning-rim[1~3,1].png:100"
            auto_vflip=false
        [/halo_frame]
        [halo2_frame]
            image="units/tharis-orbs/magic-big-[1~4].png:100"
            auto_vflip=false
        [/halo2_frame]
        [bolt_frame]
            image="units/tharis-orbs/bolt-a-[1~4].png:100"
            auto_vflip=false
        [/bolt_frame]
        [bolt_frame]
            image="misc/blank-hex.png:1"
        [/bolt_frame]
        [bolt2_frame]
            image="misc/blank-hex.png:1"
        [/bolt2_frame]
        [bolt2_frame]
            image="units/tharis-orbs/bolt-b-[1~4].png:100"
            auto_vflip=false
        [/bolt2_frame]
        missile_start_time=-200
        [missile_frame]
            image="halo/circuit-n[1~3].png:75"
            image_diagonal="halo/circuit-ne[1~3].png:75"
            image_mod="~GS()~CS(150,0,180)"
            offset=0.5
        [/missile_frame]
        [if]
            hits=yes

            [ball_frame]
                duration=550
                image=projectiles/zmage-halo[1~5,4~1,2~5].png
                image_mod="~GS()~CS(150,0,180)"
                layer=99
                x,y=2,-2
                alpha=0~0.75:75,0.6:325,0.6~0:150
                offset=1
            [/ball_frame]
            ball_start_time=-100
            missile2_start_time=-100
            missile3_start_time=-100
            [missile_frame]
                image="halo/circuit-n[3~1].png:50"
                image_diagonal="halo/circuit-ne[3~1].png:50"
                image_mod="~GS()~CS(150,0,180)"
                offset=0.5
            [/missile_frame]
            [missile2_frame]
                duration=400
                halo="halo/undead/idle-flash-[1~21].png"
                halo_x=-12
                offset=1.0
            [/missile2_frame]
            [missile3_frame]
                duration=400
                halo="halo/undead/idle-flash-[1~21].png~FL(horiz)~FL(vert)"
                halo_x=12
                offset=1.0
            [/missile3_frame]
            [frame]
                duration=450
                image="units/tharis-orbs/orb2-[1~6].png"
                sound=lightning-miss.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-200
                end=0
                duration=450
                image="units/tharis-orbs/orb2-[1~6].png"
                sound=lightning-miss.ogg
            [/frame]
        [/else]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=dark lightning
        [/filter_attack]
        terrain_type=Q*^*,Mv^*
        start_time=-400
        halo_start_time=-400
        halo2_start_time=-400
        bolt_start_time=-400
        bolt2_start_time=-100
        [shield_frame]
            image="units/tharis-orbs/shield.png:100"
            auto_vflip=false
            layer=1
        [/shield_frame]
        [halo_frame]
            image="units/tharis-orbs/lightning-rim[1~3,1].png:100"
            auto_vflip=false
        [/halo_frame]
        [halo2_frame]
            image="units/tharis-orbs/magic-big-[1~4].png:100"
            auto_vflip=false
        [/halo2_frame]
        [bolt_frame]
            image="units/tharis-orbs/bolt-a-[1~4].png:100"
            auto_vflip=false
        [/bolt_frame]
        [bolt_frame]
            image="misc/blank-hex.png:1"
        [/bolt_frame]
        [bolt2_frame]
            image="misc/blank-hex.png:1"
        [/bolt2_frame]
        [bolt2_frame]
            image="units/tharis-orbs/bolt-b-[1~4].png:100"
            auto_vflip=false
        [/bolt2_frame]
        missile_start_time=-200
        [missile_frame]
            image="halo/circuit-n[1~3].png:75"
            image_diagonal="halo/circuit-ne[1~3].png:75"
            image_mod="~GS()~CS(150,0,180)"
            offset=0.5
        [/missile_frame]
        [if]
            hits=yes

            [ball_frame]
                duration=550
                image=projectiles/zmage-halo[1~5,4~1,2~5].png
                image_mod="~GS()~CS(150,0,180)"
                layer=99
                x,y=2,-2
                alpha=0~0.75:75,0.6:325,0.6~0:150
                offset=1
            [/ball_frame]
            ball_start_time=-100
            missile2_start_time=-100
            missile3_start_time=-100
            [missile_frame]
                image="halo/circuit-n[3~1].png:50"
                image_diagonal="halo/circuit-ne[3~1].png:50"
                image_mod="~GS()~CS(150,0,180)"
                offset=0.5
            [/missile_frame]
            [missile2_frame]
                duration=400
                halo="halo/undead/idle-flash-[1~21].png"
                halo_x=-12
                offset=1.0
            [/missile2_frame]
            [missile3_frame]
                duration=400
                halo="halo/undead/idle-flash-[1~21].png~FL(horiz)~FL(vert)"
                halo_x=12
                offset=1.0
            [/missile3_frame]
            [frame]
                duration=450
                image="units/tharis-orbs/orb2-ns[1~6].png"
                sound=lightning-miss.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-200
                end=0
                duration=450
                image="units/tharis-orbs/orb2-ns[1~6].png"
                sound=lightning-miss.ogg
            [/frame]
        [/else]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=life drain
        [/filter_attack]
        start_time=-400
        halo_start_time=-400
        halo2_start_time=-400
        bolt_start_time=-400
        bolt2_start_time=-100
        [shield_frame]
            image="units/tharis-orbs/shield.png:100"
            auto_vflip=false
            layer=1
        [/shield_frame]
        [halo_frame]
            image="units/tharis-orbs/lightning-rim[1~3,1].png:100"
            auto_vflip=false
        [/halo_frame]
        [halo2_frame]
            image="units/tharis-orbs/magic-big-[1~4].png:100"
            auto_vflip=false
        [/halo2_frame]
        [bolt_frame]
            image="units/tharis-orbs/bolt-a-[1~4].png:100"
            auto_vflip=false
        [/bolt_frame]
        [bolt_frame]
            image="misc/blank-hex.png:1"
        [/bolt_frame]
        [bolt2_frame]
            image="misc/blank-hex.png:1"
        [/bolt2_frame]
        [bolt2_frame]
            image="units/tharis-orbs/bolt-b-[1~4].png:100"
            auto_vflip=false
        [/bolt2_frame]
        missile_start_time=-200
        [if]
            hits=yes
            [missile_frame]
                image="halo/circuit-n[1~3,1~3].png:75"
                image_diagonal="halo/circuit-ne[1~3,1~3].png:75"
                image_mod="~GS()~CS(150,0,180)"
                alpha=0~1:100,1:250,1~0:100
                offset=0.5
                sound=magic-dark-big.ogg
            [/missile_frame]
        [/if]
        [else]
            [missile_frame]
                image="halo/circuit-n[1~3].png:75"
                image_diagonal="halo/circuit-ne[1~3,1~3].png:75"
                image_mod="~GS()~CS(150,0,180)"
                alpha=0~1:100,1~0:125
                offset=0.5
                sound=magic-dark-big-miss.ogg
            [/missile_frame]
        [/else]
        [frame]
            duration=450
            image="units/tharis-orbs/orb2-[1~6].png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=life drain
        [/filter_attack]
        terrain_type=Q*^*,Mv^*
        start_time=-400
        halo_start_time=-400
        halo2_start_time=-400
        bolt_start_time=-400
        bolt2_start_time=-100
        [shield_frame]
            image="units/tharis-orbs/shield.png:100"
            auto_vflip=false
            layer=1
        [/shield_frame]
        [halo_frame]
            image="units/tharis-orbs/lightning-rim[1~3,1].png:100"
            auto_vflip=false
        [/halo_frame]
        [halo2_frame]
            image="units/tharis-orbs/magic-big-[1~4].png:100"
            auto_vflip=false
        [/halo2_frame]
        [bolt_frame]
            image="units/tharis-orbs/bolt-a-[1~4].png:100"
            auto_vflip=false
        [/bolt_frame]
        [bolt_frame]
            image="misc/blank-hex.png:1"
        [/bolt_frame]
        [bolt2_frame]
            image="misc/blank-hex.png:1"
        [/bolt2_frame]
        [bolt2_frame]
            image="units/tharis-orbs/bolt-b-[1~4].png:100"
            auto_vflip=false
        [/bolt2_frame]
        missile_start_time=-200
        [if]
            hits=yes
            [missile_frame]
                image="halo/circuit-n[1~3,1~3].png:75"
                image_diagonal="halo/circuit-ne[1~3,1~3].png:75"
                image_mod="~GS()~CS(150,0,180)"
                alpha=0~1:100,1:250,1~0:100
                offset=0.5
                sound=magic-dark-big.ogg
            [/missile_frame]
        [/if]
        [else]
            [missile_frame]
                image="halo/circuit-n[1~3].png:75"
                image_diagonal="halo/circuit-ne[1~3,1~3].png:75"
                image_mod="~GS()~CS(150,0,180)"
                alpha=0~1:100,1~0:125
                offset=0.5
                sound=magic-dark-big-miss.ogg
            [/missile_frame]
        [/else]
        [frame]
            duration=450
            image="units/tharis-orbs/orb2-ns[1~6].png"
        [/frame]
    [/attack_anim]
[/unit_type]

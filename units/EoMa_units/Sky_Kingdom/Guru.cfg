#textdomain wesnoth-Ageless_Era
[unit_type]
    id=AE_mag_Guru
    name= _ "Guru"
    race=human
    image="units/skykingdom-magi/guru.png"
    profile="portraits/sky_kingdom/guru.png"
    small_profile="portraits/sky_kingdom/guru.png~SCALE(205,205)"
    hitpoints=60
    movement_type=fly
    movement=5
    experience=200
    level=4
    alignment=neutral
    advances_to=null
    {AMLA_DEFAULT}
    cost=100
    usage=mixed fighter
    undead_variation=battlemage
    description= _ {AE_EOMA_UNIT_NOTICE} +  _ "Gurus, due to their amazing knowledge of the worldâ€™s occult secerts, are fearsome mages, crushing their enemies with great chunks of rock they conjure out of nothing, and protecting themselves in inpenetrable ice stases. Also, they can summon golems as their companions and when in combat, they can even call for two Ums performing their unstoppable shield-breaking attack upon totally suprised foes."+{SPECIAL_NOTES}+{SPECIAL_NOTES_MAGICAL}+{SPECIAL_NOTES_ARCANE}+{SPECIAL_NOTES_REGENERATES}+{SPECIAL_NOTES_LEADERSHIP}+" This unit has 10% resistance to anti-shield attacks, being the only unit in the era to have resistance to them."
    die_sound={SOUND_LIST:HUMAN_DIE}
    [abilities]
        {AE_MAG_ABILITYSUMMON guru (
            {SUMMON_MENU_ITEM guru_menu ( _ "Summon Golem (16 Gold)") 16 (AE_mag_Guru) (AE_mag_Golem)}
        )}
        {ABILITY_LEADERSHIP_LEVEL_4}
        {AE_MAG_ABILITYREGENERATES}
    [/abilities]
    [resistance]
        blade=60
        pierce=60
        impact=60
        fire=70
        cold=70
        arcane=70
        secret=90
    [/resistance]
    [defend]
        start_time=-200
        [frame]
            image="units/skykingdom-magi/guru-defend-[1~3,2,1].png:[75,83*2,84,75]"
        [/frame]
    [/defend]
    [death]
        [frame]
            image="units/skykingdom-magi/guru-die-[1~6].png:200"
        [/frame]
    [/death]
    [standing_anim]
        [frame]
            image="units/skykingdom-magi/guru.png:100"
        [/frame]
    [/standing_anim]
    [standing_anim]
        terrain_type=Q*,Mv,*^Qov,W*,S*
        [frame]
            image="units/skykingdom-magi/guru-die-1.png:225"
            y=1
        [/frame]
        [frame]
            image="units/skykingdom-magi/guru-die-1.png:150"
            y=0
        [/frame]
        [frame]
            image="units/skykingdom-magi/guru-die-1.png:150"
            y=-1
        [/frame]
        [frame]
            image="units/skykingdom-magi/guru-die-1.png:150"
            y=0
        [/frame]
    [/standing_anim]
    [attack]
        name=light touch
        description=_"light touch"
        icon=attacks/faerie-fire.png
        type=arcane
        range=melee
        damage=11
        number=2
        [specials]
            {WEAPON_SPECIAL_MAGICAL}
        [/specials]
    [/attack]
    [attack]
        name=umstrike
        description=_"um strike"
        type=secret
        icon=attacks/implosion.png
        range=ranged
        [specials]
            {AE_MAG_WEAPON_SPECIAL_ANTISHIELD}
            {WEAPON_SPECIAL_MAGICAL}
        [/specials]
        damage=20
        number=2
    [/attack]
    [attack]
        name=landmass
        description=_"landmass"
        type=impact
        icon=attacks/landmass.png
        range=ranged
        [specials]
            {AE_MAG_WEAPON_SPECIAL_AREAEFFECT}
            {WEAPON_SPECIAL_MAGICAL}
        [/specials]
        damage=12
        number=4
    [/attack]
    [attack_anim]
        [filter_attack]
            name=light touch
        [/filter_attack]
        start_time=-250
        [frame]
            image="units/skykingdom-magi/[guru,guru-magic7,guru-magic8,guru-magic7,guru].png:[50,100,200,50*2]"
            halo="projectiles/zmage-preparation-halo[1~7,7~1].png:[25*14]"
            halo_mod=~GS()~CS(32,32,32)
            halo_x,halo_y=8,0
        [/frame]
        {SOUND:HIT_AND_MISS um.ogg um-miss.ogg -100}
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=landmass
        [/filter_attack]
        [if]
            hits=yes
            missile_start_time=-1500
            shadow_start_time=-1500
            [missile_frame]
                halo=halo/rock.png:1500
                halo_y=-800~0
                offset=1.0
                auto_vflip=no
                auto_hflip=no
                layer=99
            [/missile_frame]
            [missile_frame]
                image=halo/rock-[1~5].png:150
                halo=halo/rock-dust[1~5].png:150
                offset=1.0
                alpha=1.0~0.0
                sound=explosion.ogg
                auto_vflip=no
                auto_hflip=no
                layer=99
            [/missile_frame]
            [shadow_frame]
                image=halo/rock-shadow.png:1500
                offset=1
                alpha=0.0~1.0
                auto_vflip=no
                auto_hflip=no
                layer=98
            [/shadow_frame]
            start_time=-1584
            [frame]
                image="units/skykingdom-magi/[guru,guru-defend-1,guru-defend-2,guru-defend-3,guru-defend-2,guru-defend-1,guru].png:[200,100*2,2100,100*2,84]"
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                image="units/skykingdom-magi/[guru-magic7,guru].png:[100,84]"
                offset=0.0
            [/frame]
            [frame]
                image="units/skykingdom-magi/guru.png"
                offset=0.0
            [/frame]
        [/else]
    [/attack_anim]

    [attack_anim]
        [filter_attack]
            name=umstrike
        [/filter_attack]
        hits=no
        [frame]
            duration=100
            image="units/skykingdom-magi/guru-magic7.png"
            offset=0.0
        [/frame]
        [frame]
            duration=84
            image="units/skykingdom-magi/guru.png"
            offset=0.0
        [/frame]
    [/attack_anim]
#define UMSTRIKE_ANIM DIR FACING1 FACING2
    [attack_anim]
        [filter_attack]
            name=umstrike
        [/filter_attack]
        direction={DIR}
        hits=yes
        start_time=-3000
        um1_start_time=-3000
        um2_start_time=-2000
        missile_start_time=-800
        [um1_frame]
            image=halo/blank.png:1
        [/um1_frame]
        [um1_frame]
            image="units/skykingdom-warriors/mysticmu-attack-1.png:1000"
            offset=0.5
            directional_y=-800~0
            alpha=0.0~1.0
            auto_vflip=no
        [/um1_frame]
        [um1_frame]
            image="units/skykingdom-warriors/mysticmu-attack-2.png:200"
            halo=halo/rock-dust[1~5].png~SCALE(400,220):100
            halo_y=10
            offset=0.5
            auto_vflip=no
            sound=mace.wav
        [/um1_frame]
        [um1_frame]
            image="units/skykingdom-warriors/mysticmu-ranged-{FACING1}.png:2200"
            offset=0.5
            auto_vflip=no
        [/um1_frame]
        [um1_frame]
            image="units/skykingdom-warriors/mysticmu-ranged-{FACING1}.png:250"
            offset=0.5
            alpha=1.0~0.0
            auto_vflip=no
        [/um1_frame]
        [um2_frame]
            image=halo/blank.png:1
        [/um2_frame]
        [um2_frame]
            image="units/skykingdom-warriors/mysticmu-attack-1.png:1000"
            image_mod=~FL(horiz)
            offset=1.5
            directional_y=-800~0
            alpha=0.0~1.0
            auto_vflip=no
        [/um2_frame]
        [um2_frame]
            image="units/skykingdom-warriors/mysticmu-attack-2.png:200"
            image_mod=~FL(horiz)
            offset=1.5
            auto_vflip=no
            sound=mace.wav
        [/um2_frame]
        [um2_frame]
            image="units/skykingdom-warriors/mysticmu-ranged-{FACING2}.png:1250"
            halo=halo/rock-dust[1~5].png~SCALE(400,220)~FL(horiz):100
            halo_y=10
            image_mod=~FL(horiz)
            offset=1.5
            auto_vflip=no
        [/um2_frame]
        [um2_frame]
            image="units/skykingdom-warriors/mysticmu-ranged-{FACING2}.png:250"
            image_mod=~FL(horiz)
            offset=1.5
            alpha=1.0~0.0
            auto_vflip=no
        [/um2_frame]
        [missile_frame]
            duration=800
            halo=projectiles/mu-preparation-halo[1~3,2,1~3,2,1~3].png
            offset=1.0
            sound=magic-dark.ogg
        [/missile_frame]
        [missile_frame]
            halo=halo/implosion-1-[6~10].png:100
            offset=1.0
            sound=explosion.ogg
        [/missile_frame]
        [frame]
            image="units/skykingdom-magi/guru.png:100"
            offset=0.0
        [/frame]
    [/attack_anim]
#enddef

    {UMSTRIKE_ANIM ne,nw ne se}
    {UMSTRIKE_ANIM se,sw se ne}
    {UMSTRIKE_ANIM s s n}
    {UMSTRIKE_ANIM n n s}
[/unit_type]
